<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01 Your First Test in 15 Minutes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --bg-main: #0f172a;
            --bg-card: #1e293b;
            --bg-code: #0f172a;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
            --accent: #06b6d4;
            --success: #10b981;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.7; 
            color: var(--text-primary); 
            background: var(--bg-main);
        }
        
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        
        .home-btn { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: var(--accent);
            color: white; 
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-decoration: none; 
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .home-btn:hover { 
            background: #0891b2;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(6, 182, 212, 0.5);
        }
        
        .breadcrumb { 
            background: var(--bg-card);
            padding: 12px 0; 
            margin-bottom: 24px; 
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .breadcrumb a { 
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .breadcrumb a:hover { 
            color: var(--primary);
            text-decoration: underline;
        }
        
        .content { 
            background: var(--bg-card);
            padding: 3rem; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
        }
        
        .file-list { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 1.5rem; 
            margin: 2rem 0; 
        }
        
        .file-item { 
            padding: 1.5rem; 
            border: 1px solid var(--border);
            border-radius: 12px; 
            background: var(--bg-main);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .file-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .file-item:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.3);
            border-color: var(--primary);
        }
        
        .file-item:hover::before {
            opacity: 1;
        }
        
        .file-item a { 
            color: var(--text-primary);
            text-decoration: none; 
            font-weight: 600; 
            display: block;
            font-size: 1.1rem;
        }
        
        .file-item a:hover { 
            color: var(--primary);
        }
        
        .file-type { 
            font-size: 13px; 
            color: var(--text-secondary);
            margin-top: 8px; 
            font-weight: 500;
        }
        
        /* Code Blocks */
        pre { 
            background: var(--bg-code);
            padding: 1.5rem; 
            border-radius: 12px; 
            overflow-x: auto;
            border: 1px solid var(--border);
            margin: 1.5rem 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        pre code { 
            background: none;
            padding: 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        /* Copy Button */
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            opacity: 0.7;
            z-index: 10;
        }
        
        .copy-btn:hover {
            opacity: 1;
            background: var(--primary-dark);
            transform: translateY(-1px);
        }
        
        .copy-btn.copied {
            background: var(--success);
        }
        
        pre:hover .copy-btn {
            opacity: 1;
        }
        
        /* Inline Code */
        code { 
            background: var(--bg-code);
            color: #8b5cf6;
            padding: 3px 8px; 
            border-radius: 6px; 
            font-size: 1.1em;
            font-family: 'Fira Code', 'Consolas', monospace;
            border: 1px solid var(--border);
        }
        
        /* Headings */
        h1, h2, h3, h4, h5, h6 { 
            color: var(--text-primary);
            margin: 2rem 0 1rem 0;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        h1 { 
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 12px;
            margin-bottom: 1.5rem;
        }
        
        h2 { 
            font-size: 2rem;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 8px;
        }
        
        h3 { 
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        /* Links */
        a { 
            color: var(--accent);
            transition: color 0.2s;
        }
        
        a:hover { 
            color: var(--primary);
        }
        
        /* Paragraphs */
        p {
            margin: 1rem 0;
            color: var(--text-secondary);
        }
        
        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
            color: var(--text-secondary);
        }
        
        li {
            margin: 0.5rem 0;
        }
        
        /* Tables */
        table { 
            border-collapse: collapse;
            width: 100%;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        th, td { 
            border: 1px solid var(--border);
            padding: 12px 16px;
            text-align: left;
        }
        
        th { 
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: var(--bg-card);
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid var(--primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background: var(--bg-main);
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        /* Horizontal Rule */
        hr {
            border: none;
            border-top: 2px solid var(--border);
            margin: 2rem 0;
        }
        
        .footer { 
            text-align: center; 
            padding: 2rem; 
            color: var(--text-secondary);
            border-top: 1px solid var(--border);
            margin-top: 3rem; 
            font-size: 14px;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-main);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 6px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .file-list { grid-template-columns: 1fr; }
            .content { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="home-btn">üè†</a>
    <div class="container">
        <div class="breadcrumb">
            <div style="padding: 0 20px;">
                <a href="../index.html">üè† Home</a> <span style="color: #64748b;">/</span> <a href="index.html">01 Getting Started</a>
            </div>
        </div>
        <div class="content">
            <h1 id="chapter-1-your-first-test-in-15-minutes">Chapter 1: Your First Test in 15 Minutes</h1>
<h2 id="why-we-test-the-quick-case">Why We Test (The Quick Case)</h2>
<h2 id="why-we-test-the-quick-case_1">Why We Test (The Quick Case)</h2>
<p>Before we write a single line of test code, let's understand what problem we're solving. Testing isn't about following best practices or checking boxes‚Äîit's about <strong>confidence</strong>.</p>
<h3 id="the-problem-code-that-works-until-it-doesnt">The Problem: Code That Works... Until It Doesn't</h3>
<p>Imagine you've written a function to calculate the total price of items in a shopping cart, including tax:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_total</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">tax_rate</span><span class="p">):</span>
    <span class="n">subtotal</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">)</span>
    <span class="n">tax</span> <span class="o">=</span> <span class="n">subtotal</span> <span class="o">*</span> <span class="n">tax_rate</span>
    <span class="k">return</span> <span class="n">subtotal</span> <span class="o">+</span> <span class="n">tax</span>
</code></pre></div>

<p>You run it manually a few times. It works. You ship it to production.</p>
<p>Three weeks later, a customer reports they were charged incorrectly. You investigate and discover that when someone adds an item with a negative price (a discount), your function produces the wrong result. The tax calculation becomes negative, which doesn't make sense.</p>
<p><strong>The core issue</strong>: You tested the function by running it manually with a few examples, but you didn't systematically verify all the scenarios it needs to handle. When you fixed a bug last week, you didn't re-verify that the original scenarios still worked.</p>
<h3 id="what-automated-testing-gives-you">What Automated Testing Gives You</h3>
<p>Automated tests are <strong>executable specifications</strong> that verify your code behaves correctly. Once written, they:</p>
<ol>
<li><strong>Run instantly</strong>: No manual clicking through your application</li>
<li><strong>Run repeatedly</strong>: Every time you change code, verify nothing broke</li>
<li><strong>Document behavior</strong>: Tests show exactly what your code is supposed to do</li>
<li><strong>Enable refactoring</strong>: Change implementation with confidence</li>
<li><strong>Catch regressions</strong>: Prevent old bugs from reappearing</li>
</ol>
<h3 id="the-testing-mindset">The Testing Mindset</h3>
<p>Testing is not about proving your code is perfect. It's about:</p>
<ul>
<li><strong>Specifying expected behavior</strong>: "When I call this function with these inputs, I expect this output"</li>
<li><strong>Documenting edge cases</strong>: "What happens with empty input? Negative numbers? None?"</li>
<li><strong>Creating a safety net</strong>: "I can change this code and immediately know if I broke something"</li>
</ul>
<p>In the next 15 minutes, you'll write your first automated test. By the end of this chapter, you'll have a working test that runs automatically and tells you whether your code behaves as expected.</p>
<h2 id="installing-pytest">Installing Pytest</h2>
<h2 id="installing-pytest_1">Installing Pytest</h2>
<p>Pytest is a Python testing framework that makes writing tests simple and powerful. Let's get it installed.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>You need Python 3.7 or later. Check your version:</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>--version
</code></pre></div>

<p>If you see <code>Python 3.7.x</code> or higher, you're ready. If not, install Python from <a href="https://www.python.org/downloads/">python.org</a>.</p>
<h3 id="installation-with-pip">Installation with pip</h3>
<p>Pytest is installed using Python's package manager, pip:</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pytest
</code></pre></div>

<p>This installs pytest and its dependencies. The installation takes about 10-30 seconds depending on your internet connection.</p>
<h3 id="verify-installation">Verify Installation</h3>
<p>Confirm pytest is installed correctly:</p>
<div class="codehilite"><pre><span></span><code>pytest<span class="w"> </span>--version
</code></pre></div>

<p>You should see output like:</p>
<div class="codehilite"><pre><span></span><code>pytest 7.4.3
</code></pre></div>

<p>The exact version number may differ‚Äîany version 7.x or later is fine for this book.</p>
<h3 id="using-a-virtual-environment-recommended">Using a Virtual Environment (Recommended)</h3>
<p>While not strictly required for this chapter, using a virtual environment is a professional practice that isolates your project's dependencies. Here's the quick setup:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create a virtual environment</span>
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv

<span class="c1"># Activate it (macOS/Linux)</span>
<span class="nb">source</span><span class="w"> </span>venv/bin/activate

<span class="c1"># Activate it (Windows)</span>
venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate

<span class="c1"># Install pytest in the virtual environment</span>
pip<span class="w"> </span>install<span class="w"> </span>pytest
</code></pre></div>

<p>You'll see <code>(venv)</code> appear in your terminal prompt, indicating the virtual environment is active. All subsequent <code>pip install</code> commands will install packages only in this isolated environment.</p>
<p><strong>Why this matters</strong>: Different projects may need different versions of pytest or other libraries. Virtual environments prevent conflicts between projects.</p>
<p>For now, whether you use a virtual environment or install pytest globally, you're ready to write your first test.</p>
<h2 id="writing-your-first-test-function">Writing Your First Test Function</h2>
<h2 id="writing-your-first-test-function_1">Writing Your First Test Function</h2>
<p>Let's write a test for a real function. We'll start with something concrete: a function that validates email addresses.</p>
<h3 id="phase-1-the-reference-implementation">Phase 1: The Reference Implementation</h3>
<p>Create a new file called <code>email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if an email address is valid.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">email</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<p>This function checks basic email validity: it must have exactly one <code>@</code> symbol, non-empty username and domain parts, and the domain must contain a dot.</p>
<p>Now let's write a test. Create a new file called <code>test_email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">email_validator</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_valid_email</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_valid_email_returns_true</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">True</span>
</code></pre></div>

<p>Let's break down what makes this a test:</p>
<h3 id="anatomy-of-a-test-function">Anatomy of a Test Function</h3>
<p><strong>1. The filename starts with <code>test_</code></strong></p>
<p>Pytest discovers tests by looking for files that match the pattern <code>test_*.py</code> or <code>*_test.py</code>. Our file <code>test_email_validator.py</code> follows this convention.</p>
<p><strong>2. The function name starts with <code>test_</code></strong></p>
<p>Pytest looks for functions whose names start with <code>test_</code>. Our function <code>test_valid_email_returns_true()</code> will be automatically discovered and executed.</p>
<p><strong>3. The function takes no parameters</strong></p>
<p>Test functions are called by pytest without arguments. They're self-contained specifications of behavior.</p>
<p><strong>4. The function uses <code>assert</code></strong></p>
<p>The <code>assert</code> statement is Python's built-in way to verify a condition is true. If the condition is false, Python raises an <code>AssertionError</code>. Pytest captures these errors and reports them as test failures.</p>
<h3 id="what-this-test-verifies">What This Test Verifies</h3>
<p>This test specifies: "When I call <code>is_valid_email()</code> with a valid email address like <code>'user@example.com'</code>, the function should return <code>True</code>."</p>
<p>The test has three parts:</p>
<ol>
<li><strong>Arrange</strong>: Set up the input (<code>'user@example.com'</code>)</li>
<li><strong>Act</strong>: Call the function and capture the result</li>
<li><strong>Assert</strong>: Verify the result matches expectations</li>
</ol>
<p>This pattern‚ÄîArrange, Act, Assert‚Äîis fundamental to testing. You'll see it in every test you write.</p>
<h3 id="why-we-import-the-function">Why We Import the Function</h3>
<p>Notice the first line:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">email_validator</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_valid_email</span>
</code></pre></div>

<p>Tests import the code they're testing just like any other Python code. The test file and the code file are separate‚Äîthis separation is intentional. Tests should be independent modules that verify your code's behavior from the outside.</p>
<h2 id="running-your-first-test">Running Your First Test</h2>
<h2 id="running-your-first-test_1">Running Your First Test</h2>
<p>Now comes the moment of truth: running the test to see if our code behaves as expected.</p>
<h3 id="running-pytest">Running Pytest</h3>
<p>In your terminal, navigate to the directory containing both <code>email_validator.py</code> and <code>test_email_validator.py</code>, then run:</p>
<div class="codehilite"><pre><span></span><code>pytest
</code></pre></div>

<p>Pytest will automatically discover and run your test. You should see output like this:</p>
<div class="codehilite"><pre><span></span><code>============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0
rootdir: /Users/you/project
collected 1 item

test_email_validator.py .                                                [100%]

============================== 1 passed in 0.01s ===============================
</code></pre></div>

<h3 id="reading-the-output">Reading the Output</h3>
<p>Let's parse this output section by section:</p>
<p><strong>1. Session header</strong>:</p>
<div class="codehilite"><pre><span></span><code>============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0
</code></pre></div>

<p>This tells you:
- What platform you're on (<code>darwin</code> = macOS, <code>linux</code>, or <code>win32</code>)
- Your Python version (3.11.5)
- Your pytest version (7.4.3)
- The plugin system version (pluggy-1.3.0)</p>
<p><strong>2. Collection summary</strong>:</p>
<div class="codehilite"><pre><span></span><code>collected 1 item
</code></pre></div>

<p>Pytest found 1 test function to run. This confirms pytest successfully discovered your test.</p>
<p><strong>3. Test execution</strong>:</p>
<div class="codehilite"><pre><span></span><code>test_email_validator.py .                                                [100%]
</code></pre></div>

<p>This line shows:
- The filename being tested (<code>test_email_validator.py</code>)
- A dot (<code>.</code>) representing one passing test
- The progress percentage (<code>[100%]</code>)</p>
<p>Each test that passes gets a dot. If a test fails, you'll see an <code>F</code> instead.</p>
<p><strong>4. Summary</strong>:</p>
<div class="codehilite"><pre><span></span><code>============================== 1 passed in 0.01s ===============================
</code></pre></div>

<p>The final tally: 1 test passed, and it took 0.01 seconds to run.</p>
<h3 id="what-just-happened">What Just Happened?</h3>
<p>When you ran <code>pytest</code>, here's what occurred:</p>
<ol>
<li><strong>Discovery</strong>: Pytest scanned your directory for files matching <code>test_*.py</code></li>
<li><strong>Collection</strong>: It found <code>test_email_validator.py</code> and looked for functions starting with <code>test_</code></li>
<li><strong>Execution</strong>: It called <code>test_valid_email_returns_true()</code></li>
<li><strong>Verification</strong>: The <code>assert</code> statement passed (the result was indeed <code>True</code>)</li>
<li><strong>Reporting</strong>: Pytest reported the test as passed</li>
</ol>
<h3 id="running-tests-explicitly">Running Tests Explicitly</h3>
<p>You can also run a specific test file:</p>
<div class="codehilite"><pre><span></span><code>pytest<span class="w"> </span>test_email_validator.py
</code></pre></div>

<p>Or even a specific test function:</p>
<div class="codehilite"><pre><span></span><code>pytest<span class="w"> </span>test_email_validator.py::test_valid_email_returns_true
</code></pre></div>

<p>The <code>::</code> syntax tells pytest to run only that specific function. This is useful when you have many tests and want to focus on one.</p>
<h3 id="verbose-output">Verbose Output</h3>
<p>For more detailed information, add the <code>-v</code> flag:</p>
<div class="codehilite"><pre><span></span><code>pytest<span class="w"> </span>-v
</code></pre></div>

<p>This produces:</p>
<div class="codehilite"><pre><span></span><code>============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0
rootdir: /Users/you/project
collected 1 item

test_email_validator.py::test_valid_email_returns_true PASSED           [100%]

============================== 1 passed in 0.01s ===============================
</code></pre></div>

<p>Notice the difference: instead of a dot, you see the full test name and the word <code>PASSED</code>. Verbose mode is helpful when you have many tests and want to see exactly which ones ran.</p>
<p>Congratulations! You've just run your first automated test. The test passed, which means your <code>is_valid_email()</code> function correctly handles the case of a valid email address.</p>
<h2 id="understanding-test-results">Understanding Test Results</h2>
<h2 id="understanding-test-results_1">Understanding Test Results</h2>
<p>A passing test is satisfying, but the real learning happens when tests fail. Let's intentionally break our code to see what pytest tells us.</p>
<h3 id="iteration-1-introducing-a-bug">Iteration 1: Introducing a Bug</h3>
<p>Let's modify our <code>is_valid_email()</code> function to introduce a bug. Change the function in <code>email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if an email address is valid.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">email</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># Bug introduced: checking for &#39;@&#39; instead of &#39;.&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<p>We changed the last validation from checking for a dot (<code>.</code>) in the domain to checking for an at-sign (<code>@</code>). This is clearly wrong‚Äîdomains should contain dots, not at-signs.</p>
<p>Now run the test again:</p>
<div class="codehilite"><pre><span></span><code>pytest
</code></pre></div>

<p>You'll see:</p>
<div class="codehilite"><pre><span></span><code><span class="o">=============================</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="o">==============================</span>
<span class="n">platform</span><span class="w"> </span><span class="n">darwin</span><span class="w"> </span><span class="c1">-- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0</span>
<span class="nl">rootdir</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">you</span><span class="o">/</span><span class="n">project</span>
<span class="n">collected</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">item</span>

<span class="n">test_email_validator</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">F</span><span class="w">                                                </span><span class="o">[</span><span class="n">100%</span><span class="o">]</span>

<span class="o">===================================</span><span class="w"> </span><span class="n">FAILURES</span><span class="w"> </span><span class="o">===================================</span>
<span class="n">_______________________</span><span class="w"> </span><span class="n">test_valid_email_returns_true</span><span class="w"> </span><span class="n">__________________________</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">test_valid_email_returns_true</span><span class="p">()</span><span class="err">:</span>
<span class="w">        </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w">       </span><span class="n">assert</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">True</span>
<span class="n">E</span><span class="w">       </span><span class="n">assert</span><span class="w"> </span><span class="k">False</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">True</span>

<span class="n">test_email_validator</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="mi">5</span><span class="err">:</span><span class="w"> </span><span class="n">AssertionError</span>
<span class="o">===========================</span><span class="w"> </span><span class="n">short</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">============================</span>
<span class="n">FAILED</span><span class="w"> </span><span class="n">test_email_validator</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="err">:</span><span class="n">test_valid_email_returns_true</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">assert</span><span class="w"> </span><span class="k">False</span><span class="p">...</span>
<span class="o">==============================</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mf">0.03</span><span class="n">s</span><span class="w"> </span><span class="o">===============================</span>
</code></pre></div>

<h3 id="diagnostic-analysis-reading-the-failure">Diagnostic Analysis: Reading the Failure</h3>
<p>Let's parse this failure message systematically. This is a critical skill‚Äîreading test failures is how you diagnose problems.</p>
<p><strong>1. The test execution line</strong>:</p>
<div class="codehilite"><pre><span></span><code>test_email_validator.py F                                                [100%]
</code></pre></div>

<p>The <code>F</code> indicates a failed test. If you had multiple tests, you'd see a pattern like <code>.F..F.</code> showing which tests passed (<code>.</code>) and which failed (<code>F</code>).</p>
<p><strong>2. The FAILURES section header</strong>:</p>
<div class="codehilite"><pre><span></span><code>=================================== FAILURES ===================================
_______________________ test_valid_email_returns_true __________________________
</code></pre></div>

<p>This section contains detailed information about each failure. The underscored line shows which test failed.</p>
<p><strong>3. The code context</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">test_valid_email_returns_true</span><span class="p">()</span><span class="err">:</span>
<span class="w">        </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w">       </span><span class="n">assert</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">True</span>
<span class="n">E</span><span class="w">       </span><span class="n">assert</span><span class="w"> </span><span class="k">False</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">True</span>
</code></pre></div>

<p>Pytest shows you:
- The test function that failed
- The line where the failure occurred (marked with <code>&gt;</code>)
- What the assertion was checking (<code>assert result == True</code>)
- What actually happened (<code>assert False == True</code>)</p>
<p>The <code>E</code> line is pytest's <strong>assertion introspection</strong>. Pytest doesn't just tell you the assertion failed‚Äîit shows you the actual values involved. Here, <code>result</code> was <code>False</code>, but we expected <code>True</code>.</p>
<p><strong>4. The location</strong>:</p>
<div class="codehilite"><pre><span></span><code>test_email_validator.py:5: AssertionError
</code></pre></div>

<p>This tells you the exact file and line number where the assertion failed. Line 5 in <code>test_email_validator.py</code> is where the problem was detected.</p>
<p><strong>5. The summary</strong>:</p>
<div class="codehilite"><pre><span></span><code>=========================== short test summary info ============================
FAILED test_email_validator.py::test_valid_email_returns_true - assert False...
============================== 1 failed in 0.03s ===============================
</code></pre></div>

<p>A concise summary of what failed. This is especially useful when you have many tests‚Äîyou can quickly scan to see which ones need attention.</p>
<h3 id="what-this-tells-us">What This Tells Us</h3>
<p>The failure message reveals:</p>
<ol>
<li><strong>What we expected</strong>: <code>result == True</code></li>
<li><strong>What we got</strong>: <code>result</code> was <code>False</code></li>
<li><strong>Where it failed</strong>: Line 5 of <code>test_email_validator.py</code></li>
</ol>
<p>This is enough information to start debugging. We know the function returned <code>False</code> when we expected <code>True</code>. Now we need to figure out why.</p>
<h3 id="fixing-the-bug">Fixing the Bug</h3>
<p>Let's fix the bug in <code>email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if an email address is valid.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">email</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># Fixed: checking for &#39;.&#39; in domain</span>
    <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<p>Run the test again:</p>
<div class="codehilite"><pre><span></span><code>pytest
</code></pre></div>

<div class="codehilite"><pre><span></span><code>============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0
rootdir: /Users/you/project
collected 1 item

test_email_validator.py .                                                [100%]

============================== 1 passed in 0.01s ===============================
</code></pre></div>

<p>The test passes again. The dot (<code>.</code>) confirms our fix worked.</p>
<h3 id="iteration-2-testing-invalid-input">Iteration 2: Testing Invalid Input</h3>
<p>Our test only verifies that valid emails return <code>True</code>. What about invalid emails? Let's add a test for that case.</p>
<p>Add this function to <code>test_email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_invalid_email_returns_false</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;invalid-email&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">False</span>
</code></pre></div>

<p>Run pytest:</p>
<div class="codehilite"><pre><span></span><code>pytest
</code></pre></div>

<div class="codehilite"><pre><span></span><code>============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0
rootdir: /Users/you/project
collected 2 items

test_email_validator.py ..                                               [100%]

============================== 2 passed in 0.01s ===============================
</code></pre></div>

<p>Now we have two tests (two dots), and both pass. We've verified two scenarios:</p>
<ol>
<li>Valid emails return <code>True</code></li>
<li>Invalid emails (missing <code>@</code>) return <code>False</code></li>
</ol>
<h3 id="the-pattern-of-test-driven-confidence">The Pattern of Test-Driven Confidence</h3>
<p>Notice the workflow that's emerging:</p>
<ol>
<li><strong>Write a test</strong> that specifies expected behavior</li>
<li><strong>Run the test</strong> to see if the code behaves correctly</li>
<li><strong>If it fails</strong>, read the failure message to understand what went wrong</li>
<li><strong>Fix the code</strong> to make the test pass</li>
<li><strong>Run the test again</strong> to verify the fix worked</li>
</ol>
<p>This cycle‚Äîwrite test, run test, fix code, verify‚Äîis the foundation of test-driven development. Each test you write increases your confidence that the code works as intended.</p>
<h3 id="understanding-assertion-introspection">Understanding Assertion Introspection</h3>
<p>Pytest's assertion introspection is one of its most powerful features. Let's see it in action with a more complex example.</p>
<p>Add this test to <code>test_email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_email_with_multiple_at_signs_returns_false</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;user@@example.com&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">False</span>
</code></pre></div>

<p>This test verifies that emails with multiple <code>@</code> symbols are rejected. Run it:</p>
<div class="codehilite"><pre><span></span><code>pytest<span class="w"> </span>-v
</code></pre></div>

<div class="codehilite"><pre><span></span><code>============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0
rootdir: /Users/you/project
collected 3 items

test_email_validator.py::test_valid_email_returns_true PASSED           [ 33%]
test_email_validator.py::test_invalid_email_returns_false PASSED        [ 66%]
test_email_validator.py::test_email_with_multiple_at_signs_returns_false PASSED [100%]

============================== 3 passed in 0.01s ===============================
</code></pre></div>

<p>All three tests pass. The verbose output (<code>-v</code>) shows each test name and its result.</p>
<h3 id="when-assertions-get-complex">When Assertions Get Complex</h3>
<p>Let's see what happens with a more detailed assertion. Add this test:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_email_parts_are_extracted_correctly</span><span class="p">():</span>
    <span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;john.doe@company.com&#39;</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;john.doe&#39;</span>
    <span class="k">assert</span> <span class="n">domain</span> <span class="o">==</span> <span class="s1">&#39;company.com&#39;</span>
</code></pre></div>

<p>This test verifies that splitting an email on <code>@</code> produces the expected parts. Now let's intentionally break it to see pytest's introspection. Change the test to:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_email_parts_are_extracted_correctly</span><span class="p">():</span>
    <span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;john.doe@company.com&#39;</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;jane.doe&#39;</span>  <span class="c1"># Wrong expected value</span>
    <span class="k">assert</span> <span class="n">domain</span> <span class="o">==</span> <span class="s1">&#39;company.com&#39;</span>
</code></pre></div>

<p>Run pytest:</p>
<div class="codehilite"><pre><span></span><code>pytest<span class="w"> </span>test_email_validator.py::test_email_parts_are_extracted_correctly<span class="w"> </span>-v
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="o">=============================</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="k">session</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="o">==============================</span>
<span class="n">platform</span><span class="w"> </span><span class="n">darwin</span><span class="w"> </span><span class="c1">-- Python 3.11.5, pytest-7.4.3, pluggy-1.3.0</span>
<span class="nl">rootdir</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">you</span><span class="o">/</span><span class="n">project</span>
<span class="n">collected</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">item</span>

<span class="n">test_email_validator</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="err">:</span><span class="n">test_email_parts_are_extracted_correctly</span><span class="w"> </span><span class="n">FAILED</span><span class="w"> </span><span class="o">[</span><span class="n">100%</span><span class="o">]</span>

<span class="o">===================================</span><span class="w"> </span><span class="n">FAILURES</span><span class="w"> </span><span class="o">===================================</span>
<span class="n">__________________</span><span class="w"> </span><span class="n">test_email_parts_are_extracted_correctly</span><span class="w"> </span><span class="n">____________________</span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">test_email_parts_are_extracted_correctly</span><span class="p">()</span><span class="err">:</span>
<span class="w">        </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;john.doe@company.com&#39;</span>
<span class="w">        </span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="k">domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">email</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w">       </span><span class="n">assert</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;jane.doe&#39;</span>
<span class="n">E</span><span class="w">       </span><span class="nl">AssertionError</span><span class="p">:</span><span class="w"> </span><span class="n">assert</span><span class="w"> </span><span class="s1">&#39;john.doe&#39;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;jane.doe&#39;</span>
<span class="n">E</span><span class="w">         </span><span class="o">-</span><span class="w"> </span><span class="n">jane</span><span class="p">.</span><span class="n">doe</span>
<span class="n">E</span><span class="w">         </span><span class="o">+</span><span class="w"> </span><span class="n">john</span><span class="p">.</span><span class="n">doe</span>

<span class="n">test_email_validator</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="mi">17</span><span class="err">:</span><span class="w"> </span><span class="n">AssertionError</span>
<span class="o">===========================</span><span class="w"> </span><span class="n">short</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">============================</span>
<span class="n">FAILED</span><span class="w"> </span><span class="n">test_email_validator</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="err">:</span><span class="n">test_email_parts_are_extracted_correctly</span>
<span class="o">==============================</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mf">0.03</span><span class="n">s</span><span class="w"> </span><span class="o">===============================</span>
</code></pre></div>

<h3 id="diagnostic-analysis-string-comparison">Diagnostic Analysis: String Comparison</h3>
<p>Look at pytest's introspection:</p>
<div class="codehilite"><pre><span></span><code>E       AssertionError: assert &#39;john.doe&#39; == &#39;jane.doe&#39;
E         - jane.doe
E         + john.doe
</code></pre></div>

<p>Pytest shows you:
1. The actual comparison that failed
2. A diff-style view showing what was expected (<code>-</code>) vs. what was actual (<code>+</code>)</p>
<p>This is incredibly helpful for debugging. You don't have to add print statements or use a debugger‚Äîpytest shows you exactly what values were involved in the failed assertion.</p>
<p>Fix the test by changing the expected value back to <code>'john.doe'</code>, and it will pass again.</p>
<h3 id="key-takeaways">Key Takeaways</h3>
<p>When a test fails, pytest gives you:</p>
<ol>
<li><strong>The exact location</strong> (file and line number)</li>
<li><strong>The assertion that failed</strong> (the actual code)</li>
<li><strong>The values involved</strong> (assertion introspection)</li>
<li><strong>A comparison</strong> (for complex types like strings, lists, dicts)</li>
</ol>
<p>This information is usually sufficient to diagnose the problem without additional debugging tools.</p>
<h2 id="what-youve-accomplished">What You've Accomplished</h2>
<h2 id="what-youve-accomplished_1">What You've Accomplished</h2>
<p>In less than 15 minutes, you've learned the fundamentals of automated testing with pytest. Let's review what you now know.</p>
<h3 id="skills-acquired">Skills Acquired</h3>
<p><strong>1. Installation and Setup</strong>
- Installed pytest using pip
- Verified the installation
- Understood the role of virtual environments</p>
<p><strong>2. Writing Tests</strong>
- Created a test file following pytest's naming conventions (<code>test_*.py</code>)
- Wrote test functions that start with <code>test_</code>
- Used Python's <code>assert</code> statement to verify behavior
- Applied the Arrange-Act-Assert pattern</p>
<p><strong>3. Running Tests</strong>
- Executed tests with the <code>pytest</code> command
- Ran specific test files and functions
- Used verbose mode (<code>-v</code>) for detailed output</p>
<p><strong>4. Reading Test Results</strong>
- Interpreted passing test output (dots and summary)
- Analyzed failing test output (failure details and assertion introspection)
- Used pytest's diagnostic information to identify bugs
- Fixed code based on test failures</p>
<h3 id="the-complete-test-suite">The Complete Test Suite</h3>
<p>Here's your final <code>test_email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">email_validator</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_valid_email</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_valid_email_returns_true</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_invalid_email_returns_false</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;invalid-email&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_email_with_multiple_at_signs_returns_false</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="s1">&#39;user@@example.com&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_email_parts_are_extracted_correctly</span><span class="p">():</span>
    <span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;john.doe@company.com&#39;</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;john.doe&#39;</span>
    <span class="k">assert</span> <span class="n">domain</span> <span class="o">==</span> <span class="s1">&#39;company.com&#39;</span>
</code></pre></div>

<p>And your <code>email_validator.py</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if an email address is valid.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">email</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<h3 id="the-testing-mindset_1">The Testing Mindset</h3>
<p>You've internalized the core testing workflow:</p>
<ol>
<li><strong>Specify behavior</strong>: Write a test that describes what should happen</li>
<li><strong>Verify behavior</strong>: Run the test to check if the code does what you expect</li>
<li><strong>Diagnose failures</strong>: Read pytest's output to understand what went wrong</li>
<li><strong>Fix and verify</strong>: Correct the code and re-run tests to confirm the fix</li>
</ol>
<p>This workflow scales from simple functions to complex systems. The principles remain the same.</p>
<h3 id="whats-next">What's Next</h3>
<p>You now have a foundation in pytest, but there's much more to learn:</p>
<ul>
<li><strong>Chapter 2</strong> will deepen your understanding of assertions and test discovery</li>
<li><strong>Chapter 3</strong> will show you how to organize tests in real projects</li>
<li><strong>Chapter 4</strong> will introduce fixtures for managing test setup and teardown</li>
<li><strong>Chapter 5</strong> will teach you how to test multiple scenarios efficiently with parametrization</li>
</ul>
<p>But for now, you've accomplished something significant: you've written automated tests that verify your code works correctly. Every time you change <code>email_validator.py</code>, you can run <code>pytest</code> and immediately know if you broke anything.</p>
<p>That's the power of automated testing. That's why we test.</p>
<h3 id="try-it-yourself">Try It Yourself</h3>
<p>Before moving to the next chapter, try these exercises:</p>
<ol>
<li><strong>Add a test</strong> for an email with no domain (e.g., <code>'user@'</code>)</li>
<li><strong>Add a test</strong> for an email with no username (e.g., <code>'@example.com'</code>)</li>
<li><strong>Add a test</strong> for an email with spaces (e.g., <code>'user @example.com'</code>)</li>
<li><strong>Modify <code>is_valid_email()</code></strong> to handle these cases correctly</li>
<li><strong>Run pytest</strong> to verify all tests pass</li>
</ol>
<p>These exercises will reinforce what you've learned and prepare you for the deeper concepts ahead.</p>
<p>Congratulations on writing your first tests. You're on your way from zero to hero.</p>
        </div>
        <div class="footer">
            Generated on 2025-12-03 10:36:58 | Made with ‚ù§Ô∏è by GitHub Pages Generator
        </div>
    </div>
    <script>
        // Syntax highlighting for code blocks
        document.addEventListener('DOMContentLoaded', (event) => {
            // Highlight code blocks
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
            
            // Add copy buttons to code blocks
            document.querySelectorAll('pre').forEach((pre) => {
                const button = document.createElement('button');
                button.className = 'copy-btn';
                button.textContent = 'Copy';
                
                button.addEventListener('click', () => {
                    const code = pre.querySelector('code').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = 'Copy';
                            button.classList.remove('copied');
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                        button.textContent = 'Error';
                        setTimeout(() => {
                            button.textContent = 'Copy';
                        }, 2000);
                    });
                });
                
                pre.appendChild(button);
            });
        });
    </script>
</body>
</html>